<nav class="navbar fixed-top">
  <div class="nav-container">
    <a href = '/'><%= image_tag 'logo.png', class: 'logo'%></a>
    <h4><%= link_to "Blog", root_path, class:'navbrand' %></h4>
    <ul class = 'nav-list' id = 'nav-list'>
      <li class = 'nav-item' onClick = 'openHomeSideBar()'><%= t(".category")%></li>
      <li class = 'nav-item' onClick = 'openHomeSideBar2()'><%= t(".recent_posts")%></li>
    </ul>
    <!--SEARCH BAR  -->
    <%= fa_icon "search",  class: "fa-2x", id: "search-icon" , onClick: 'openSearchBar()'%>
    <div class="search-box" id = 'search-box'>
      <%= form_tag(posts_path, method: :get) do %>
        <%= text_field_tag :title, params[:title],class:'search-bar', placeholder:'Type Here...' %>
          <span id='close-icon' onClick = 'closeSearchBar()'>x</span>
      <% end %>
    </div>
  </div>
</nav>


<!-- SIDE MENUES  -->
<div id="overlay" onClick = "closeHomeSideBar()"></div>
<!-- SIDE NAV1 -->
<ul class="navbar-side" id="navbarSide">
     <% @categories.each do |category| %>
      <li class = "navbar-side-item"><%= link_to "#{category.name} (#{category.posts.size})", posts_path(category: category.id), class:"category-name" %></li>
     <% end %>
</ul>
<!-- SIDE NAV2 -->
<ul class="navbar-side2" id="navbarSide2">
  <% @recent_posts.each do |post| %>
   <li class = "navbar-side-item"><%= link_to post.title, post_path(post), class: 'recent-post-item' %></li>
  <% end %>
</ul>



<script>
  var homeSideBar = document.getElementById('navbarSide')
  var homeSideBar2 = document.getElementById('navbarSide2')
  var overlay = document.getElementById('overlay')
  var nav_list = document.getElementById('nav-list')
  var search_icon = document.getElementById('search-icon')
  var search_box = document.getElementById('search-box')

  function openHomeSideBar(){
    homeSideBar.classList.add('reveal');
    overlay.style.display = 'block';
  }
  function openHomeSideBar2(){
    homeSideBar2.classList.add('reveal');
    overlay.style.display = 'block';
  }
  function closeHomeSideBar(){
    homeSideBar.classList.remove('reveal');
    homeSideBar2.classList.remove('reveal');
    overlay.style.display = 'none';
  }

  function openSearchBar() {
    nav_list.style.display = 'none';
    search_icon.style.display = 'none';
    search_box.style.display = 'block';
  }

  function closeSearchBar() {
    nav_list.style.display = 'block';
    search_icon.style.display = 'block';
    search_box.style.display = 'none';
  }
</script>
