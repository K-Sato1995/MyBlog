<%= render 'nav' %>

  <% flash.each do |key, value| %>
    <div class = "alert alert-<%= key %>"><%= value%></div>
  <% end %>

<div class = 'admin-container'>
  <div class = 'row'>
    <!-- SideBar -->
    <div class="col-md-2 admin-wrapper" id = 'admin-wrapper'>
      <div id = 'admin-sidebar'>
        <!-- Sidebar-list -->
        <ul class="sidebar-nav">
          <li><%= link_to 'Home', root_path %></li>
          <% if user_signed_in? %>
            <li><%= link_to 'Logout as admin', destroy_user_session_path, method: :delete %></li>
          <% end %>
          <li><%=link_to 'New', new_admin_post_path%></li>
      </div>
    </div>
    <!-- Content -->
    <div class="col-md-10 admin-content" id = 'admin-content'>
      <!-- Table -->
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Title</th>
            <th scope="col">Status</th>
            <th scope="col">Category</th>
            <th scope="col">Posted on</th>
            <th scope="col">Last updated on</th>
            <th scope = 'col'>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @posts.each do |post| %>
          <tr>
            <td><%= post.id %></td>
            <td><%= link_to post.title, post_path(post) %></td>
            <td><%= humanize(post.status) %></td>
            <td><%= post.category_name %></td>
            <td><%= post.created_at.strftime("%Y/%m/%d") %></td>
            <td><%= post.updated_at.strftime("%Y/%m/%d") %></td>
            <td>
              <%= link_to 'Edit', edit_admin_post_path(post) %>
              <%= link_to 'Delete',admin_post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
          </tr>

          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
let sidebar = document.getElementById('admin-sidebar')
let adminWrapper = document.getElementById('admin-wrapper')
let adminContent = document.getElementById('admin-content')

function openNav(){
  sidebar.style.width = '200px';
  adminWrapper.className = 'col-md-2 admin-wrapper';
  adminContent.className = 'col-md-10 admin-content';
}

function closeNav(){
  sidebar.style.width = '0px';
  adminWrapper.className = 'col-md-0 admin-wrapper';
  adminContent.className = 'col-md-12 admin-content';
}

function toggleNav(){
  if(sidebar.style.width === '0px'){
    openNav()
  }else{
    closeNav()
  }
}
</script>
